# æƒ…æ„Ÿè¯†åˆ«åŠŸèƒ½ä½¿ç”¨æŒ‡å—

## åŠŸèƒ½æ¦‚è¿°

æœ¬AIæ™ºèƒ½å®¢æœç³»ç»Ÿç°å·²é›†æˆæƒ…æ„Ÿè¯†åˆ«åŠŸèƒ½ï¼Œèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹ç”¨æˆ·çš„æƒ…ç»ªçŠ¶æ€ï¼Œå¹¶åœ¨ç”¨æˆ·è¡¨ç°å‡ºè´Ÿé¢æƒ…ç»ªï¼ˆå¦‚æ€¥èºã€ä¸æ»¡æ„ã€æŠ•è¯‰éœ€æ±‚ï¼‰æ—¶ï¼Œè‡ªåŠ¨æä¾›äººå·¥å®¢æœè½¬æ¥æœåŠ¡ã€‚

## åŠŸèƒ½ç‰¹æ€§

### 1. æƒ…æ„Ÿæ£€æµ‹ç±»å‹

ç³»ç»Ÿèƒ½å¤Ÿè¯†åˆ«ä»¥ä¸‹æƒ…æ„ŸçŠ¶æ€ï¼š

- **æ„¤æ€’æƒ…ç»ª** (`angry`): æ£€æµ‹å…³é”®è¯å¦‚ "angry", "mad", "furious", "pissed", "irritated", "annoyed", "frustrated"
- **æ€¥èºæƒ…ç»ª** (`impatient`): æ£€æµ‹å…³é”®è¯å¦‚ "hurry", "urgent", "asap", "immediately", "quickly", "fast", "now", "waiting too long"
- **ä¸æ»¡æƒ…ç»ª** (`dissatisfied`): æ£€æµ‹å…³é”®è¯å¦‚ "terrible", "awful", "horrible", "useless", "stupid", "worst", "hate", "disappointed"
- **æŠ•è¯‰éœ€æ±‚** (`complaint`): æ£€æµ‹å…³é”®è¯å¦‚ "complain", "complaint", "report", "escalate", "manager", "supervisor"
- **è½¬äººå·¥éœ€æ±‚** (`transfer`): æ£€æµ‹å…³é”®è¯å¦‚ "human", "person", "agent", "representative", "transfer", "speak to someone", "talk to someone"

### 2. æƒ…ç»ªå¼ºåº¦æ£€æµ‹

ç³»ç»Ÿè¿˜ä¼šæ£€æµ‹ä»¥ä¸‹æƒ…ç»ªå¼ºåº¦æŒ‡æ ‡ï¼š
- **è¿‡åº¦æ ‡ç‚¹ç¬¦å·**: è¶…è¿‡2ä¸ªæ„Ÿå¹å·è¡¨ç¤ºæƒ…ç»ªæ¿€åŠ¨
- **å¤§å†™å­—æ¯æ¯”ä¾‹**: è¶…è¿‡50%å¤§å†™å­—æ¯è¡¨ç¤ºç”¨æˆ·æƒ…ç»ªæ¿€åŠ¨

### 3. è‡ªåŠ¨äººå·¥è½¬æ¥

å½“æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è§¦å‘äººå·¥å®¢æœè½¬æ¥ï¼š
- æ£€æµ‹åˆ°æŠ•è¯‰æˆ–è½¬äººå·¥ç›¸å…³å…³é”®è¯
- æƒ…ç»ªè¯„åˆ†è¾¾åˆ°3åˆ†æˆ–ä»¥ä¸Šï¼ˆå¤šç§è´Ÿé¢æƒ…ç»ªåŒæ—¶å‡ºç°ï¼‰

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šæ„¤æ€’æƒ…ç»ªæ£€æµ‹

**ç”¨æˆ·è¾“å…¥**: "I am so frustrated with this system!"

**ç³»ç»Ÿå“åº”**: 
- æ£€æµ‹åˆ°æ„¤æ€’æƒ…ç»ª
- åœ¨å›ç­”ä¸­æ·»åŠ åŒç†å¿ƒè¡¨è¾¾
- æä¾›é¢å¤–çš„äººå·¥å®¢æœé€‰é¡¹

### ç¤ºä¾‹2ï¼šæŠ•è¯‰éœ€æ±‚è‡ªåŠ¨è½¬æ¥

**ç”¨æˆ·è¾“å…¥**: "I need to complain about something. Can I speak to a manager?"

**ç³»ç»Ÿå“åº”**: 
- è‡ªåŠ¨è§¦å‘äººå·¥å®¢æœè½¬æ¥
- æ˜¾ç¤º"ğŸ”„ Connecting to human agent..."æŒ‡ç¤ºå™¨
- æä¾›ä¸“ä¸šçš„è½¬æ¥è¯æœ¯

### ç¤ºä¾‹3ï¼šæ€¥èºæƒ…ç»ªå¤„ç†

**ç”¨æˆ·è¾“å…¥**: "I need help ASAP! This is urgent!"

**ç³»ç»Ÿå“åº”**: 
- æ£€æµ‹åˆ°æ€¥èºæƒ…ç»ª
- åœ¨å›ç­”ä¸­ä½“ç°ç†è§£å’Œç´§è¿«æ€§
- æä¾›å¿«é€Ÿè§£å†³æ–¹æ¡ˆ

## ç•Œé¢ç‰¹æ€§

### 1. è§†è§‰æŒ‡ç¤ºå™¨

- **äººå·¥è½¬æ¥æŒ‡ç¤ºå™¨**: çº¢è‰²èƒŒæ™¯çš„"ğŸ”„ Connecting to human agent..."åŠ¨ç”»
- **æƒ…æ„Ÿæ ‡ç­¾**: æ˜¾ç¤ºæ£€æµ‹åˆ°çš„å…·ä½“æƒ…æ„Ÿç±»å‹
- **ç‰¹æ®Šæ ·å¼**: éœ€è¦äººå·¥è½¬æ¥çš„æ¶ˆæ¯æœ‰ç‰¹æ®Šçš„çº¢è‰²è¾¹æ¡†å’ŒèƒŒæ™¯

### 2. å“åº”è¯æœ¯

ç³»ç»Ÿæä¾›ä¸‰ç§å±‚æ¬¡çš„åŒç†å¿ƒè¯æœ¯ï¼š

1. **è½»åº¦è´Ÿé¢æƒ…ç»ª**: "I understand this might be frustrating..."
2. **ä¸­åº¦è´Ÿé¢æƒ…ç»ª**: "I understand your concern..."
3. **é‡åº¦è´Ÿé¢æƒ…ç»ª/æŠ•è¯‰**: "I understand your concern and I want to make sure you get the best possible help..."

## æŠ€æœ¯å®ç°

### åç«¯APIå¢å¼º

èŠå¤©API (`/api/chat`) ç°åœ¨è¿”å›é¢å¤–çš„æƒ…æ„Ÿåˆ†æä¿¡æ¯ï¼š

```json
{
  "question": "ç”¨æˆ·é—®é¢˜",
  "answer": "AIå›ç­”",
  "source": "faq_match|ai_generated|human_transfer",
  "confidence": "high|medium|low",
  "similarity": 0.85,
  "emotion_analysis": {
    "emotions": ["angry", "frustrated"],
    "emotion_score": 2,
    "needs_human": false,
    "sentiment": "negative"
  },
  "requires_human": false
}
```

### å‰ç«¯ç»„ä»¶æ›´æ–°

- `MessageBubble` ç»„ä»¶æ”¯æŒæ˜¾ç¤ºæƒ…æ„ŸæŒ‡ç¤ºå™¨å’Œäººå·¥è½¬æ¥çŠ¶æ€
- `ChatPage` ç»„ä»¶å¤„ç†äººå·¥è½¬æ¥é€»è¾‘
- æ–°å¢CSSæ ·å¼æ”¯æŒæƒ…æ„Ÿè¯†åˆ«ç•Œé¢å…ƒç´ 

## æµ‹è¯•åŠŸèƒ½

å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æµ‹è¯•ç”¨ä¾‹éªŒè¯æƒ…æ„Ÿè¯†åˆ«åŠŸèƒ½ï¼š

```bash
# åœ¨åç«¯ç›®å½•è¿è¡Œæµ‹è¯•è„šæœ¬
cd faq-backend
python test_emotion_recognition.py
```

### æµ‹è¯•ç”¨ä¾‹

1. **æ„¤æ€’æµ‹è¯•**: "I am so frustrated with this system!"
2. **æ€¥èºæµ‹è¯•**: "I need help ASAP! This is urgent!"
3. **æŠ•è¯‰æµ‹è¯•**: "This is terrible and useless. I want to complain!"
4. **è½¬äººå·¥æµ‹è¯•**: "Can I speak to a human agent please?"
5. **å¤§å†™æµ‹è¯•**: "I AM REALLY MAD ABOUT THIS!!!"
6. **æ­£å¸¸æµ‹è¯•**: "Hello, how can I reset my password?"

## é…ç½®é€‰é¡¹

### æƒ…æ„Ÿæ£€æµ‹é˜ˆå€¼

å¯ä»¥åœ¨ `ai_service.py` ä¸­è°ƒæ•´ä»¥ä¸‹å‚æ•°ï¼š

- **æƒ…æ„Ÿè¯„åˆ†é˜ˆå€¼**: é»˜è®¤3åˆ†è§¦å‘äººå·¥è½¬æ¥
- **å¤§å†™å­—æ¯æ¯”ä¾‹é˜ˆå€¼**: é»˜è®¤50%
- **æ„Ÿå¹å·æ•°é‡é˜ˆå€¼**: é»˜è®¤2ä¸ª

### å…³é”®è¯åº“æ‰©å±•

å¯ä»¥åœ¨ `negative_emotion_keywords` å­—å…¸ä¸­æ·»åŠ æ›´å¤šå…³é”®è¯ï¼š

```python
self.negative_emotion_keywords = {
    'angry': ['angry', 'mad', 'furious', ...],
    'impatient': ['hurry', 'urgent', 'asap', ...],
    # æ·»åŠ æ›´å¤šå…³é”®è¯
}
```

## æœ€ä½³å®è·µ

1. **åŠæ—¶å“åº”**: å½“æ£€æµ‹åˆ°è´Ÿé¢æƒ…ç»ªæ—¶ï¼Œç³»ç»Ÿä¼šä¼˜å…ˆæä¾›åŒç†å¿ƒå›åº”
2. **äººå·¥å¤‡é€‰**: å§‹ç»ˆä¸ºç”¨æˆ·æä¾›è½¬æ¥äººå·¥å®¢æœçš„é€‰é¡¹
3. **æƒ…ç»ªç¼“è§£**: ä½¿ç”¨æ¸©å’Œã€ç†è§£çš„è¯­è¨€æ¥ç¼“è§£ç”¨æˆ·æƒ…ç»ª
4. **å¿«é€Ÿè§£å†³**: å¯¹äºæ€¥èºç”¨æˆ·ï¼Œä¼˜å…ˆæä¾›å¿«é€Ÿè§£å†³æ–¹æ¡ˆ

## æ³¨æ„äº‹é¡¹

1. æƒ…æ„Ÿè¯†åˆ«åŸºäºå…³é”®è¯åŒ¹é…ï¼Œå¯èƒ½å­˜åœ¨è¯¯åˆ¤
2. å»ºè®®ç»“åˆäººå·¥å®¡æ ¸æ¥æé«˜å‡†ç¡®æ€§
3. å®šæœŸæ›´æ–°å…³é”®è¯åº“ä»¥é€‚åº”ç”¨æˆ·è¡¨è¾¾ä¹ æƒ¯
4. ç›‘æ§è½¬æ¥ç‡ï¼Œé¿å…è¿‡åº¦è½¬æ¥å½±å“æ•ˆç‡

## æœªæ¥æ‰©å±•

1. **æœºå™¨å­¦ä¹ æ¨¡å‹**: é›†æˆæ›´å…ˆè¿›çš„æƒ…æ„Ÿåˆ†ææ¨¡å‹
2. **å¤šè¯­è¨€æ”¯æŒ**: æ”¯æŒä¸­æ–‡ç­‰å…¶ä»–è¯­è¨€çš„æƒ…æ„Ÿè¯†åˆ«
3. **æƒ…ç»ªå†å²**: è®°å½•ç”¨æˆ·æƒ…ç»ªå˜åŒ–è¶‹åŠ¿
4. **ä¸ªæ€§åŒ–å“åº”**: æ ¹æ®ç”¨æˆ·å†å²æƒ…ç»ªè°ƒæ•´å›åº”ç­–ç•¥